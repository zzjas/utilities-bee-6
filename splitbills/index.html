<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Split Bills</title>
	<meta name="Resource-type" content="Document" />
	<script type="text/javascript" src="../base.js"></script>
    <link rel="stylesheet" type="text/css" href="../main.css" />
</head>
<body>
	<a href="..">back</a> <br/><br/>
	<ul id="amounts">
        <li>
			Person 1 amount:
			<input type="number" class="amount">
		</li>
        <li>
			Person 2 amount:
			<input type="number" class="amount">
		</li>
        <li>
			Person 3 amount:
			<input type="number" class="amount">
		</li>
        <li>
			Person 4 amount:
			<input type="number" class="amount">
		</li>
    </ul>
	<div>Total amount: <input type="number" id="total"></div><br/>
	<button id="generate">Split it</button>
	<script type="text/javascript">
		function splitBill(amounts, total) {
			const sum = amounts.reduce((a,b)=>a+b);
			return amounts.map(e => (e/sum) * total);
		}
		document.getElementById("generate").addEventListener("click", ()=>{
			let total = parseBase10(ID("total").value);
			let amounts = Array.from(ID("amounts").getElementsByTagName("li"))
				.map(e => parseBase10(e.getElementsByClassName("amount")[0].value));
			splitBill(amounts, total).forEach((e,i) => {
				let re = document.createElement('p');
				re.innerHTML = `Person ${i+1}: $${e.toFixed(2)}`;
				document.body.appendChild(re);
			});
		});
	</script>
</body>
</html>